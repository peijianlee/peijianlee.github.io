[{"data":1,"prerenderedAt":375},["ShallowReactive",2],{"content-query-DsRH991H56":3},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":7,"navigation":9,"body":16,"_type":369,"_id":370,"_source":371,"_file":372,"_stem":373,"_extension":374},"/posts/20211028","posts",false,"","å‰ç«¯å¾®æœåŠ¡-qiankunå®‰è£…ä¸é…ç½®",{"title":8,"description":10,"date":11,"account":12,"tags":13},"qiankun å­µåŒ–è‡ªèš‚èšé‡‘èç§‘æŠ€åŸºäºå¾®å‰ç«¯æ¶æ„çš„äº‘äº§å“ç»Ÿä¸€æ¥å…¥å¹³å°ï¼Œåœ¨ç»è¿‡ä¸€æ‰¹çº¿ä¸Šåº”ç”¨çš„å……åˆ†æ£€éªŒåŠæ‰“ç£¨åï¼Œæˆ‘ä»¬å°†å…¶å¾®å‰ç«¯å†…æ ¸æŠ½å–å‡ºæ¥å¹¶å¼€æºï¼Œå¸Œæœ›èƒ½åŒæ—¶å¸®åŠ©ç¤¾åŒºæœ‰ç±»ä¼¼éœ€æ±‚çš„ç³»ç»Ÿæ›´æ–¹ä¾¿çš„æ„å»ºè‡ªå·±çš„å¾®å‰ç«¯ç³»ç»Ÿï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›é€šè¿‡ç¤¾åŒºçš„å¸®åŠ©å°† qiankun æ‰“ç£¨çš„æ›´åŠ æˆç†Ÿå®Œå–„ã€‚","2021-10-28 10:20:00","lpj",[14,15],"å‰ç«¯å¾®æœåŠ¡","ä¹¾å¤",{"type":17,"children":18,"toc":350},"root",[19,27,53,57,62,68,73,87,99,106,115,121,142,164,173,203,212,224,234,243,249,262,271,277,289,294],{"type":20,"tag":21,"props":22,"children":24},"element","h2",{"id":23},"ä»‹ç»",[25],{"type":26,"value":23},"text",{"type":20,"tag":28,"props":29,"children":30},"p",{},[31,33,42,44,51],{"type":26,"value":32},"qiankun æ˜¯ä¸€ä¸ªåŸºäº ",{"type":20,"tag":34,"props":35,"children":39},"a",{"href":36,"rel":37},"https://github.com/CanopyTax/single-spa",[38],"nofollow",[40],{"type":26,"value":41},"single-spa",{"type":26,"value":43}," çš„",{"type":20,"tag":34,"props":45,"children":48},{"href":46,"rel":47},"https://micro-frontends.org/",[38],[49],{"type":26,"value":50},"å¾®å‰ç«¯å®",{"type":26,"value":52},"ç°åº“ï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶èƒ½æ›´ç®€å•ã€æ— ç—›çš„æ„å»ºä¸€ä¸ªç”Ÿäº§å¯ç”¨å¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚",{"type":20,"tag":28,"props":54,"children":55},{},[56],{"type":26,"value":10},{"type":20,"tag":28,"props":58,"children":59},{},[60],{"type":26,"value":61},"ç›®å‰ qiankun å·²åœ¨èš‚èšå†…éƒ¨æœåŠ¡äº†è¶…è¿‡ 200+ çº¿ä¸Šåº”ç”¨ï¼Œåœ¨æ˜“ç”¨æ€§åŠå®Œå¤‡æ€§ä¸Šï¼Œç»å¯¹æ˜¯å€¼å¾—ä¿¡èµ–çš„ã€‚",{"type":20,"tag":21,"props":63,"children":65},{"id":64},"_1ä¸»åº”ç”¨",[66],{"type":26,"value":67},"1ã€ä¸»åº”ç”¨",{"type":20,"tag":28,"props":69,"children":70},{},[71],{"type":26,"value":72},"ä¸»åº”ç”¨ä¸é™æŠ€æœ¯æ ˆï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªå®¹å™¨ DOMï¼Œç„¶åæ³¨å†Œå¾®åº”ç”¨å¹¶ start å³å¯ã€‚",{"type":20,"tag":28,"props":74,"children":75},{},[76,78,85],{"type":26,"value":77},"å…ˆå®‰è£… ",{"type":20,"tag":79,"props":80,"children":82},"code",{"className":81},[],[83],{"type":26,"value":84},"qiankun",{"type":26,"value":86}," ï¼š",{"type":20,"tag":88,"props":89,"children":94},"pre",{"className":90,"code":92,"language":93,"meta":7},[91],"language-js","$ yarn add qiankun # æˆ–è€… npm i qiankun -S\n","js",[95],{"type":20,"tag":79,"props":96,"children":97},{"__ignoreMap":7},[98],{"type":26,"value":92},{"type":20,"tag":100,"props":101,"children":103},"h3",{"id":102},"_11æ³¨å†Œå¾®åº”ç”¨å¹¶å¯åŠ¨",[104],{"type":26,"value":105},"1.1ã€æ³¨å†Œå¾®åº”ç”¨å¹¶å¯åŠ¨ï¼š",{"type":20,"tag":88,"props":107,"children":110},{"className":108,"code":109,"language":93,"meta":7},[91],"import { registerMicroApps, start } from 'qiankun';\n\nregisterMicroApps([\n  {\n    name: 'reactApp',\n    entry: '//localhost:3000',\n    container: '#container',\n    activeRule: '/app-react',\n  },\n  {\n    name: 'vueApp',\n    entry: '//localhost:8080',\n    container: '#container',\n    activeRule: '/app-vue',\n  },\n  {\n    name: 'angularApp',\n    entry: '//localhost:4200',\n    container: '#container',\n    activeRule: '/app-angular',\n  },\n]);\n// å¯åŠ¨ qiankun\nstart();\n",[111],{"type":20,"tag":79,"props":112,"children":113},{"__ignoreMap":7},[114],{"type":26,"value":109},{"type":20,"tag":21,"props":116,"children":118},{"id":117},"_2vue-å¾®åº”ç”¨",[119],{"type":26,"value":120},"2ã€Vue å¾®åº”ç”¨",{"type":20,"tag":28,"props":122,"children":123},{},[124,126,132,134,140],{"type":26,"value":125},"ä»¥ ",{"type":20,"tag":79,"props":127,"children":129},{"className":128},[],[130],{"type":26,"value":131},"vue-cli 3+",{"type":26,"value":133}," ç”Ÿæˆçš„ ",{"type":20,"tag":79,"props":135,"children":137},{"className":136},[],[138],{"type":26,"value":139},"vue 2.x",{"type":26,"value":141}," é¡¹ç›®ä¸ºä¾‹",{"type":20,"tag":100,"props":143,"children":145},{"id":144},"_21åœ¨-src-ç›®å½•æ–°å¢-public-pathjs",[146,148,154,156,162],{"type":26,"value":147},"2.1ã€åœ¨ ",{"type":20,"tag":79,"props":149,"children":151},{"className":150},[],[152],{"type":26,"value":153},"src",{"type":26,"value":155}," ç›®å½•æ–°å¢ ",{"type":20,"tag":79,"props":157,"children":159},{"className":158},[],[160],{"type":26,"value":161},"public-path.js",{"type":26,"value":163},"ï¼š",{"type":20,"tag":88,"props":165,"children":168},{"className":166,"code":167,"language":93,"meta":7},[91],"if (window.__POWERED_BY_QIANKUN__) {\n  __webpack_public_path__ = window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__;\n}\n",[169],{"type":20,"tag":79,"props":170,"children":171},{"__ignoreMap":7},[172],{"type":26,"value":167},{"type":20,"tag":100,"props":174,"children":176},{"id":175},"_22å…¥å£æ–‡ä»¶-mainjs-ä¿®æ”¹ä¸ºäº†é¿å…æ ¹-id-app-ä¸å…¶ä»–çš„-dom-å†²çªéœ€è¦é™åˆ¶æŸ¥æ‰¾èŒƒå›´",[177,179,185,187,193,195,201],{"type":26,"value":178},"2.2ã€å…¥å£æ–‡ä»¶ ",{"type":20,"tag":79,"props":180,"children":182},{"className":181},[],[183],{"type":26,"value":184},"main.js",{"type":26,"value":186}," ä¿®æ”¹ï¼Œä¸ºäº†é¿å…æ ¹ ",{"type":20,"tag":79,"props":188,"children":190},{"className":189},[],[191],{"type":26,"value":192},"id #app",{"type":26,"value":194}," ä¸å…¶ä»–çš„ ",{"type":20,"tag":79,"props":196,"children":198},{"className":197},[],[199],{"type":26,"value":200},"DOM",{"type":26,"value":202}," å†²çªï¼Œéœ€è¦é™åˆ¶æŸ¥æ‰¾èŒƒå›´ã€‚",{"type":20,"tag":88,"props":204,"children":207},{"className":205,"code":206,"language":93,"meta":7},[91],"// new Vue({\n//   router,\n//   store,\n//   render: h => h(App)\n// }).$mount('#app')\n\n// ä¹¾å¤é…ç½®æ–¹æ³•\nlet instance = null\nfunction render( props = {}) {\n    const { container } = props\n    instance = new Vue({\n        router,\n        store,\n        render: h => h(App),\n    }).$mount(container ? container.querySelector('#app'): '#app')\n}\n\nif (!window.__POWERED_BY_QIANKUN__) {\n    render()\n}\n\n//--------- ç”Ÿå‘½å‘¨æœŸå‡½æ•°------------//\nexport async function bootstrap() {\n    console.log('[qiankun] vue app bootstraped')\n}\nexport async function mount(props) {\n    console.log('[qiankun] props from main framework', props)\n    render(props)\n}\nexport async function unmount() {\n    instance.$destroy()\n    instance.$el.innerHTML = ''\n    instance = null\n}\n\n",[208],{"type":20,"tag":79,"props":209,"children":210},{"__ignoreMap":7},[211],{"type":26,"value":206},{"type":20,"tag":100,"props":213,"children":215},{"id":214},"_23é…ç½®-vueconfigjs",[216,218],{"type":26,"value":217},"2.3ã€é…ç½® ",{"type":20,"tag":79,"props":219,"children":221},{"className":220},[],[222],{"type":26,"value":223},"vue.config.js",{"type":20,"tag":28,"props":225,"children":226},{},[227,229],{"type":26,"value":228},"åœ¨å­é¡¹ç›®å†…ä¿®æ”¹ ",{"type":20,"tag":79,"props":230,"children":232},{"className":231},[],[233],{"type":26,"value":223},{"type":20,"tag":88,"props":235,"children":238},{"className":236,"code":237,"language":93,"meta":7},[91],"const path = require('path');\nconst { name } = require('./package');\n\nfunction resolve(dir) {\n    return path.join(__dirname, dir);\n}\n\nconst port = 8092; // dev port\n\nmodule.exports = {\n  /**\n   * You will need to set publicPath if you plan to deploy your site under a sub path,\n   * for example GitHub Pages. If you plan to deploy your site to https://foo.github.io/bar/,\n   * then publicPath should be set to \"/bar/\".\n   * In most cases please use '/' !!!\n   * Detail: https://cli.vuejs.org/config/#publicpath\n   */\n    // åŸºæœ¬è·¯å¾„\n    publicPath: process.env.publicPath != null && process.env.publicPath != '' ? process.env.publicPath : '/',\n    outputDir: process.env.outputDir != null && process.env.outputDir != '' ? process.env.outputDir : 'dist',\n    filenameHashing: true,\n    // tweak internal webpack configuration.\n    // see https://github.com/vuejs/vue-cli/blob/dev/docs/webpack.md\n    devServer: {\n        // host: '0.0.0.0',\n        hot: true,\n        disableHostCheck: true,\n        port,\n        // overlay: {\n        //     warnings: false,\n        //     errors: true,\n        // },\n        headers: {\n            'Access-Control-Allow-Origin': '*',\n        },\n    },\n    // è‡ªå®šä¹‰webpacké…ç½®\n    configureWebpack: {\n        resolve: {\n            alias: {\n                // '@': window.__POWERED_BY_QIANKUN__? resolve('/naroticControl/src'): resolve('/src'),\n                '@': resolve('/src'),\n            },\n        },\n        output: {\n            // æŠŠå­åº”ç”¨æ‰“åŒ…æˆ umd åº“æ ¼å¼\n            library: `${name}-[name]`,\n            libraryTarget: 'umd',\n            jsonpFunction: `webpackJsonp_${name}`,\n        },\n    },\n};\n",[239],{"type":20,"tag":79,"props":240,"children":241},{"__ignoreMap":7},[242],{"type":26,"value":237},{"type":20,"tag":100,"props":244,"children":246},{"id":245},"_24é…ç½®å­é¡¹ç›®çš„-router",[247],{"type":26,"value":248},"2.4ã€é…ç½®å­é¡¹ç›®çš„ router",{"type":20,"tag":28,"props":250,"children":251},{},[252,254,260],{"type":26,"value":253},"ä¿®æ”¹è¾“å‡ºçš„ç›®å½•ï¼Œéœ€è¦å’Œä¸»åº”ç”¨çš„ ",{"type":20,"tag":79,"props":255,"children":257},{"className":256},[],[258],{"type":26,"value":259},"activeRule",{"type":26,"value":261}," ä¸€è‡´",{"type":20,"tag":88,"props":263,"children":266},{"className":264,"code":265,"language":93,"meta":7},[91],"const router = new VueRouter({\n    mode: 'history',\n    base: window.__POWERED_BY_QIANKUN__? '/app-vue/': process.env.BASE_URL,\n    routes\n})\n",[267],{"type":20,"tag":79,"props":268,"children":269},{"__ignoreMap":7},[270],{"type":26,"value":265},{"type":20,"tag":21,"props":272,"children":274},{"id":273},"ä¸ºä»€ä¹ˆä¸æ˜¯-iframe",[275],{"type":26,"value":276},"ä¸ºä»€ä¹ˆä¸æ˜¯ iframe",{"type":20,"tag":28,"props":278,"children":279},{},[280,282],{"type":26,"value":281},"çœ‹è¿™é‡Œ ",{"type":20,"tag":34,"props":283,"children":286},{"href":284,"rel":285},"https://www.yuque.com/kuitos/gky7yw/gesexv",[38],[287],{"type":26,"value":288},"Why Not Iframe",{"type":20,"tag":21,"props":290,"children":292},{"id":291},"ç‰¹æ€§",[293],{"type":26,"value":291},{"type":20,"tag":295,"props":296,"children":297},"ul",{},[298,311,316,321,326,331,336],{"type":20,"tag":299,"props":300,"children":301},"li",{},[302,304,309],{"type":26,"value":303},"ğŸ“¦ åŸºäº ",{"type":20,"tag":34,"props":305,"children":307},{"href":36,"rel":306},[38],[308],{"type":26,"value":41},{"type":26,"value":310}," å°è£…ï¼Œæä¾›äº†æ›´åŠ å¼€ç®±å³ç”¨çš„ APIã€‚",{"type":20,"tag":299,"props":312,"children":313},{},[314],{"type":26,"value":315},"ğŸ“± æŠ€æœ¯æ ˆæ— å…³ï¼Œä»»æ„æŠ€æœ¯æ ˆçš„åº”ç”¨å‡å¯ ä½¿ç”¨/æ¥å…¥ï¼Œä¸è®ºæ˜¯ React/Vue/Angular/JQuery è¿˜æ˜¯å…¶ä»–ç­‰æ¡†æ¶ã€‚",{"type":20,"tag":299,"props":317,"children":318},{},[319],{"type":26,"value":320},"ğŸ’ª HTML Entry æ¥å…¥æ–¹å¼ï¼Œè®©ä½ æ¥å…¥å¾®åº”ç”¨åƒä½¿ç”¨ iframe ä¸€æ ·ç®€å•ã€‚",{"type":20,"tag":299,"props":322,"children":323},{},[324],{"type":26,"value":325},"ğŸ›¡â€‹ æ ·å¼éš”ç¦»ï¼Œç¡®ä¿å¾®åº”ç”¨ä¹‹é—´æ ·å¼äº’ç›¸ä¸å¹²æ‰°ã€‚",{"type":20,"tag":299,"props":327,"children":328},{},[329],{"type":26,"value":330},"ğŸ§³ JS æ²™ç®±ï¼Œç¡®ä¿å¾®åº”ç”¨ä¹‹é—´ å…¨å±€å˜é‡/äº‹ä»¶ ä¸å†²çªã€‚",{"type":20,"tag":299,"props":332,"children":333},{},[334],{"type":26,"value":335},"âš¡ï¸ èµ„æºé¢„åŠ è½½ï¼Œåœ¨æµè§ˆå™¨ç©ºé—²æ—¶é—´é¢„åŠ è½½æœªæ‰“å¼€çš„å¾®åº”ç”¨èµ„æºï¼ŒåŠ é€Ÿå¾®åº”ç”¨æ‰“å¼€é€Ÿåº¦ã€‚",{"type":20,"tag":299,"props":337,"children":338},{},[339,341,348],{"type":26,"value":340},"ğŸ”Œ umi æ’ä»¶ï¼Œæä¾›äº† ",{"type":20,"tag":34,"props":342,"children":345},{"href":343,"rel":344},"https://github.com/umijs/plugins/tree/master/packages/plugin-qiankun",[38],[346],{"type":26,"value":347},"@umijs/plugin-qiankun",{"type":26,"value":349}," ä¾› umi åº”ç”¨ä¸€é”®åˆ‡æ¢æˆå¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚",{"title":7,"searchDepth":351,"depth":351,"links":352},2,[353,354,358,367,368],{"id":23,"depth":351,"text":23},{"id":64,"depth":351,"text":67,"children":355},[356],{"id":102,"depth":357,"text":105},3,{"id":117,"depth":351,"text":120,"children":359},[360,362,364,366],{"id":144,"depth":357,"text":361},"2.1ã€åœ¨ src ç›®å½•æ–°å¢ public-path.jsï¼š",{"id":175,"depth":357,"text":363},"2.2ã€å…¥å£æ–‡ä»¶ main.js ä¿®æ”¹ï¼Œä¸ºäº†é¿å…æ ¹ id #app ä¸å…¶ä»–çš„ DOM å†²çªï¼Œéœ€è¦é™åˆ¶æŸ¥æ‰¾èŒƒå›´ã€‚",{"id":214,"depth":357,"text":365},"2.3ã€é…ç½® vue.config.js",{"id":245,"depth":357,"text":248},{"id":273,"depth":351,"text":276},{"id":291,"depth":351,"text":291},"markdown","content:posts:20211028.md","content","posts/20211028.md","posts/20211028","md",1745134959175]